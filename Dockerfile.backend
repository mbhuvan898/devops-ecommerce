FROM node:20-alpine

WORKDIR /app

# Copy root package.json and install ALL dependencies
COPY package*.json ./
RUN npm install --production

# Copy everything (server.js, routes, etc.)
COPY . .

# Copy .env
COPY .env .env

EXPOSE 5000

# Start backend using root package.json
CMD ["npm", "start"]
