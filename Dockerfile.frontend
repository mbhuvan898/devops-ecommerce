FROM node:20-alpine

WORKDIR /app/frontend

# Copy root package.json first (for caching)
COPY package*.json ../
RUN cd .. && npm install

# Copy everything
COPY . ..

# Copy .env to root
COPY .env ../.env

# Expose React dev server port
EXPOSE 3000

# Start exactly like you do: cd frontend && npm start
CMD ["sh", "-c", "cd /app/frontend && npm start"]
